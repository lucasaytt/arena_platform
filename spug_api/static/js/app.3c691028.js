(function(t){function e(e){for(var a,o,i=e[0],c=e[1],l=e[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],a=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=r[0]))}return t}var a={},s={app:0},n=[];function o(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=a,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"03ae":function(t,e,r){},4678:function(t,e,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc10","./be.js":"1fc10","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=n(t);return r(e)}function n(t){if(!r.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}s.keys=function(){return Object.keys(a)},s.resolve=n,t.exports=s,s.id="4678"},"56d7":function(t,e,r){"use strict";r.r(e);r("e623"),r("e379"),r("5dc8"),r("37e1");var a=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container-fluid",attrs:{id:"app"}},[r("router-view")],1)},n=[],o={name:"App"},i=o,c=r("2877"),l=Object(c["a"])(i,s,n,!1,null,null,null),u=l.exports,d=r("1dce"),m=r.n(d),g=r("f23d"),f=(r("ab8b"),r("202f"),r("8c4f")),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"top"}},[r("a-layout",[r("a-layout-header",{staticClass:"header",style:{position:"fixed",zIndex:1,width:"100%"}},[r("div",{staticClass:"logo"},[t._v(" 欢迎："+t._s(t.currentUser)+" ")]),r("a-menu",{style:{lineHeight:"64px"},attrs:{theme:"dark",mode:"horizontal"},on:{click:t.onMenuClick}},[r("a-menu-item",{key:"create",staticClass:"ant-menu-item-active"},[r("a-icon",{attrs:{type:"fork"}}),r("span",[t._v("创建任务")])],1),r("a-menu-item",{key:"list"},[r("a-icon",{attrs:{type:"dashboard"}}),r("span",[t._v(" 任务列表")])],1),r("a-menu-item",{key:"detail",attrs:{disabled:""}},[r("a-icon",{attrs:{type:"edit"}}),r("span",[t._v("任务详情")])],1),r("a-menu-item",{key:"listinstance"},[r("a-icon",{attrs:{type:"history"}}),r("span",[t._v("实例列表")])],1)],1)],1),r("a-layout-content",[t.createResult?r("a-alert",{attrs:{message:"创建成功，请移步任务列表，或者点击 清空 重新创建新的任务。","show-icon":"",type:"success"}}):t._e(),t.createError?r("a-alert",{attrs:{message:t.lastCreatedError,"show-icon":"",type:"error"}}):t._e(),r("a-form-model",{ref:"taskFrom",attrs:{model:t.form,rules:t.rules}},[r("a-form-model-item",{ref:"taskName",attrs:{label:"任务名",prop:"taskName"}},[r("a-input",{on:{blur:function(){t.$refs.taskName.onFieldBlur()}},model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName",e)},expression:"form.taskName"}})],1),r("a-form-model-item",{ref:"desc",attrs:{label:"任务描述",prop:"taskDesc"}},[r("a-input",{on:{blur:function(){t.$refs.desc.onFieldBlur()}},model:{value:t.form.taskDesc,callback:function(e){t.$set(t.form,"taskDesc",e)},expression:"form.taskDesc"}})],1),r("a-form-model-item",{attrs:{label:"任务组",prop:"taskGroup"}},[r("a-select",{attrs:{placeholder:"选择一个分组"},model:{value:t.form.taskGroup,callback:function(e){t.$set(t.form,"taskGroup",e)},expression:"form.taskGroup"}},t._l(t.groups,(function(e){return r("a-select-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1),r("a-form-model-item",{ref:"taskCmd",attrs:{label:"提交命令",prop:"taskCmd"}},[r("a-textarea",{attrs:{rows:"6"},on:{blur:function(){t.$refs.taskCmd.onFieldBlur()}},model:{value:t.form.taskCmd,callback:function(e){t.$set(t.form,"taskCmd",e)},expression:"form.taskCmd"}})],1),r("a-form-model-item",[r("a-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(" 创建任务 ")]),r("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.resetForm}},[t._v(" 重置表单 ")])],1)],1)],1)],1)],1)},p=[],v={data:function(){return{groups:["ad"],form:{taskName:"",taskDesc:"",taskCmd:"",taskGroup:""},rules:{taskName:[{required:!0,message:"任务名不能为空",trigger:"blur"}],taskDesc:[{required:!0,message:"任务描述不能为空",trigger:"blur"}],taskCmd:[{required:!0,message:"任务命令不能为空",trigger:"blur"}],taskGroup:[{required:!0,message:"任务组不能为空",trigger:"blur"}]},createResult:!1,createError:!1}},computed:{lastCreatedError:function(){return this.$store.state.lastCreatedError},currentUser:function(){return this.$store.state.username}},methods:{onSubmit:function(){var t=this;this.$refs.taskFrom.validate((function(e){if(!e)return!1;var r={name:t.form.taskName,desc:t.form.taskDesc,cmd:t.form.taskCmd,group:t.form.taskGroup},a=t.$store.watch((function(t){return t.lastCreatedTaskId}),(function(e){e>0&&(t.createResult=!0,t.createError=!1),a()})),s=t.$store.watch((function(t){return t.lastCreatedError}),(function(e){""!=e&&(t.createError=!0,t.createResult=!1),s()}));t.$store.dispatch("CreateTaskAction",r)}))},resetForm:function(){this.$refs.taskFrom.resetFields(),this.createResult=!1,this.createError=!1},onMenuClick:function(t){this.$router.push("/"+t.key)}},created:function(){this.$store.dispatch("CurrentUserAction")}},b=v,_=(r("cb4f"),Object(c["a"])(b,h,p,!1,null,"2c12444e",null)),k=_.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"top"}},[r("a-layout",[r("a-layout-header",{staticClass:"header",style:{position:"fixed",zIndex:1,width:"100%"}},[r("div",{staticClass:"logo"},[t._v(" 欢迎："+t._s(t.currentUser)+" ")]),r("a-menu",{style:{lineHeight:"64px"},attrs:{theme:"dark",mode:"horizontal"},on:{click:t.onMenuClick}},[r("a-menu-item",{key:"create"},[r("a-icon",{attrs:{type:"fork"}}),r("span",[t._v("创建任务")])],1),r("a-menu-item",{key:"list",staticClass:"ant-menu-item-active"},[r("a-icon",{attrs:{type:"dashboard"}}),r("span",[t._v(" 任务列表")])],1),r("a-menu-item",{key:"detail",attrs:{disabled:""}},[r("a-icon",{attrs:{type:"edit"}}),r("span",[t._v("任务详情")])],1),r("a-menu-item",{key:"listinstance"},[r("a-icon",{attrs:{type:"history"}}),r("span",[t._v("实例列表")])],1)],1)],1),r("a-layout-content",[r("a-table",{attrs:{id:"tasktable",rowKey:"id",columns:t.columns,dataSource:t.tasks,pagination:t.pagination},on:{change:t.onTableChange},scopedSlots:t._u([{key:"detail",fn:function(e,a){return r("span",{},[r("router-link",{attrs:{to:"/detail/"+a.id}},[t._v("详情")])],1)}}])})],1)],1)],1)},j=[],w={data:function(){return{columns:[{title:"任务名",dataIndex:"name"},{title:"任务描述",width:300,dataIndex:"desc"},{title:"提交用户",dataIndex:"user"},{title:"提交命令",width:600,dataIndex:"cmd"},{title:"操作",dataIndex:"id",scopedSlots:{customRender:"detail"}}]}},computed:{pagination:function(){return{total:this.$store.state.total}},tasks:function(){return this.$store.state.tasks},currentUser:function(){return this.$store.state.username}},methods:{onTableChange:function(t){this.$store.commit("setCurrentPage",t.current),this.$store.dispatch("listTaskAction")},onMenuClick:function(t){this.$router.push("/"+t.key)}},created:function(){this.$store.dispatch("CurrentUserAction"),this.$store.dispatch("listTaskAction")}},$=w,x=(r("dfc1"),Object(c["a"])($,y,j,!1,null,"60ed10cd",null)),C=x.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"top"}},[r("a-layout",[r("a-layout-header",{staticClass:"header",style:{position:"fixed",zIndex:1,width:"100%"}},[r("div",{staticClass:"logo"},[t._v(" 欢迎："+t._s(t.currentUser)+" ")]),r("a-menu",{style:{lineHeight:"64px"},attrs:{theme:"dark",mode:"horizontal"},on:{click:t.onMenuClick}},[r("a-menu-item",{key:"create"},[r("a-icon",{attrs:{type:"fork"}}),r("span",[t._v("创建任务")])],1),r("a-menu-item",{key:"list"},[r("a-icon",{attrs:{type:"dashboard"}}),r("span",[t._v(" 任务列表")])],1),r("a-menu-item",{key:"detail",staticClass:"ant-menu-item-active"},[r("a-icon",{attrs:{type:"edit"}}),r("span",[t._v("任务详情")])],1),r("a-menu-item",{key:"listinstance"},[r("a-icon",{attrs:{type:"history"}}),r("span",[t._v("实例列表")])],1)],1)],1),r("a-layout-content",[r("a-modal",{attrs:{title:"设置触发器"},on:{ok:t.onDlgOK},model:{value:t.dlgShow,callback:function(e){t.dlgShow=e},expression:"dlgShow"}},[r("a-form-model",{attrs:{model:t.form}},[r("a-form-item",{attrs:{label:"调度策略"}},[r("a-radio-group",{model:{value:t.form.trigger,callback:function(e){t.$set(t.form,"trigger",e)},expression:"form.trigger"}},[r("a-radio-button",{attrs:{value:"cron"}},[t._v("周期")]),r("a-radio-button",{attrs:{value:"interval"}},[t._v("间隔")]),r("a-radio-button",{attrs:{value:"date"}},[t._v("定期")])],1)],1),"interval"==t.form.trigger?r("a-form-item",{attrs:{label:"调度间隔 秒"}},[r("a-input",{attrs:{placeholder:"请输入调度间隔"},model:{value:t.form.interval_trigger_args,callback:function(e){t.$set(t.form,"interval_trigger_args",e)},expression:"form.interval_trigger_args"}})],1):t._e(),"date"==t.form.trigger?r("a-form-item",{attrs:{label:"选择时间"}},[r("a-date-picker",{attrs:{"show-time":"",valueFormat:"yyyy-MM-DD HH:mm:ss",placeholder:"选择固定的时间"},model:{value:t.form.date_trigger_args,callback:function(e){t.$set(t.form,"date_trigger_args",e)},expression:"form.date_trigger_args"}})],1):t._e(),"cron"==this.form.trigger?r("a-form-item",{attrs:{label:"选择月份"}},[r("a-select",{attrs:{mode:"multiple",placeholder:"默认每月"},model:{value:t.form.cron_trigger_args.month,callback:function(e){t.$set(t.form.cron_trigger_args,"month",e)},expression:"form.cron_trigger_args.month"}},t._l(t.month_list,(function(e,a){return r("a-select-option",{key:a,attrs:{value:a+1}},[t._v(t._s(e))])})),1)],1):t._e(),"cron"==this.form.trigger?r("a-form-item",{attrs:{label:"输入日期"}},[r("a-select",{attrs:{mode:"tags",placeholder:"默认每天"},model:{value:t.form.cron_trigger_args.day,callback:function(e){t.$set(t.form.cron_trigger_args,"day",e)},expression:"form.cron_trigger_args.day"}},[r("a-select-option",{attrs:{value:"last"}},[t._v("每月最后一天")]),r("a-select-option",{attrs:{disabled:"",value:"s1"}},[t._v("示例：*/2 每2天")]),r("a-select-option",{attrs:{disabled:"",value:"s2"}},[t._v("示例：1-7 1号到7号")]),r("a-select-option",{attrs:{disabled:"",value:"s3"}},[t._v("示例：1,7 1号和7号")]),r("a-select-option",{attrs:{disabled:"",value:"s4"}},[t._v("示例：1-7/2 1号到7号每2天")]),r("a-select-option",{attrs:{disabled:"",value:"s5"}},[t._v("说明：取值范围(1-31)，输入多个值，则之间为或关系")])],1)],1):t._e(),"cron"==this.form.trigger?r("a-form-item",{attrs:{label:"输入小时"}},[r("a-select",{attrs:{mode:"tags",placeholder:"默认每小时"},model:{value:t.form.cron_trigger_args.hour,callback:function(e){t.$set(t.form.cron_trigger_args,"hour",e)},expression:"form.cron_trigger_args.hour"}},[r("a-select-option",{attrs:{value:"s1",disabled:""}},[t._v("示例：*/2 每2小时")]),r("a-select-option",{attrs:{value:"s2",disabled:""}},[t._v("示例：8-20 早8点到晚8点")]),r("a-select-option",{attrs:{value:"s3",disabled:""}},[t._v("示例：8,20 早8点和晚8点")]),r("a-select-option",{attrs:{value:"s4",disabled:""}},[t._v("示例：8-20/2 早8点到晚8点每2小时")]),r("a-select-option",{attrs:{value:"s5",disabled:""}},[t._v("说明：取值范围(0-23)，输入多个值，则之间为或关系")])],1)],1):t._e(),"cron"==this.form.trigger?r("a-form-item",{attrs:{label:"输入分钟"}},[r("a-select",{attrs:{mode:"tags",placeholder:"默认每分钟"},model:{value:t.form.cron_trigger_args.minute,callback:function(e){t.$set(t.form.cron_trigger_args,"minute",e)},expression:"form.cron_trigger_args.minute"}},[r("a-select-option",{attrs:{value:"s1",disabled:""}},[t._v("示例：*/5 每5分钟")]),r("a-select-option",{attrs:{value:"s2",disabled:""}},[t._v("示例：0-30 整点到第30分钟")]),r("a-select-option",{attrs:{value:"s3",disabled:""}},[t._v("示例：0,30 整点和第30分钟")]),r("a-select-option",{attrs:{value:"s4",disabled:""}},[t._v("示例：0-30/5 前半个小时每5分钟")]),r("a-select-option",{attrs:{value:"s5",disabled:""}},[t._v("说明：取值范围(0-59)，输入多个值，则之间为或关系")])],1)],1):t._e(),"cron"==this.form.trigger?r("a-form-item",{attrs:{label:"输入每周"}},[r("a-select",{attrs:{mode:"tags",placeholder:"默认周一到周日都执行"},model:{value:t.form.cron_trigger_args.day_of_week,callback:function(e){t.$set(t.form.cron_trigger_args,"day_of_week",e)},expression:"form.cron_trigger_args.day_of_week"}},[r("a-select-option",{attrs:{value:"s1",disabled:""}},[t._v("示例：5 每周五执行")]),r("a-select-option",{attrs:{value:"s2",disabled:""}},[t._v("示例：1-5 周一到周五执行")]),r("a-select-option",{attrs:{value:"s3",disabled:""}},[t._v("示例：1,2,3 周一周二周三执行")]),r("a-select-option",{attrs:{value:"s4",disabled:""}},[t._v("说明：取值范围(0-6)，0代表周日，6代表周六")])],1)],1):t._e(),"cron"==this.form.trigger?r("a-form-item",{attrs:{label:"生效时间"}},[r("a-range-picker",{attrs:{"show-time":"",type:"daterange",valueFormat:"yyyy-MM-DD HH:mm:ss"},model:{value:t.form.cron_trigger_args.range,callback:function(e){t.$set(t.form.cron_trigger_args,"range",e)},expression:"form.cron_trigger_args.range"}})],1):t._e()],1)],1),t.ready?r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",[t._v("属性")]),r("th",[t._v("值")])])]),r("tbody",[r("tr",[r("td",[t._v("任务ID")]),r("td",[t._v(t._s(t.task.id))])]),r("tr",[r("td",[t._v("任务名字")]),r("td",[t._v(t._s(t.task.name))])]),r("tr",[r("td",[t._v("用户")]),r("td",[t._v(t._s(t.task.user))])]),r("tr",[r("td",[t._v("描述")]),r("td",[t._v(t._s(t.task.desc))])]),r("tr",[r("td",[t._v("调度周期")]),r("td",[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"schdTypes"}},[t._v("调度类型")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.selType,expression:"selType"}],staticClass:"form-control",attrs:{disabled:"",id:"schdTypes"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selType=e.target.multiple?r:r[0]}}},t._l(t.schdTypes,(function(e){return r("option",{key:e},[t._v(" "+t._s(e)+" ")])})),0),r("a",{directives:[{name:"show",rawName:"v-show",value:""!=t.selType,expression:"selType!=''"}],attrs:{href:t.doc,target:"_blank"}},[t._v("参数设置参考文档")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"schdArgs"}},[t._v("调度参数")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.$v.selArgs.$model,expression:"$v.selArgs.$model"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.$v.selArgs.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.selArgs,"$model",e.target.value)}}}),r("validation-error",{attrs:{validation:t.$v.selArgs}})],1),r("div",{staticClass:"form-group mt-0"},[r("button",{staticClass:"btn btn-outline-warning",on:{click:t.setTaskTrigger}},[t._v("设置调度")]),r("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",checked:t.checked},on:{change:t.switchTrigger}})],1)])]),r("tr",[r("td",[t._v("命令")]),r("td",[r("div",{staticClass:"form-group"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.task.cmd,expression:"task.cmd"}],staticClass:"form-control",attrs:{rows:"10"},domProps:{value:t.task.cmd},on:{input:function(e){e.target.composing||t.$set(t.task,"cmd",e.target.value)}}}),r("button",{staticClass:"btn btn-outline-info",on:{click:t.runCmd}},[t._v("直接运行命令")]),r("button",{staticClass:"btn btn-outline-warning",on:{click:t.updateCmd}},[t._v("更改运行命令")])])])]),r("tr",[r("td",[t._v("运行历史")]),r("td",[t.histories?r("table",{staticClass:"table table-bordered "},[r("thead",[r("tr",[r("td",[t._v("创建时间")]),r("td",[t._v("耗时 s")]),r("td",[t._v("退出代码")]),r("td",[t._v("标准输出")]),r("td",[t._v("错误输出")])])]),r("tbody",t._l(t.histories,(function(e){return r("tr",{key:e.id},[r("td",[t._v(t._s(e.created))]),r("td",[t._v(t._s(e.taken))]),r("td",[t._v(t._s(e.code))]),r("td",[r("router-link",{attrs:{target:"_self",to:"/log/"+e.id+"/stdout"}},[t._v("stdout")])],1),r("td",[r("router-link",{attrs:{target:"_self",to:"/log/"+e.id+"/stderr"}},[t._v("stderr")])],1)])})),0)]):r("span",[t._v("没有运行历史")])])]),r("tr",[r("td",[t._v("其他操作")]),r("td",[r("button",{staticClass:"btn btn-danger",on:{click:t.deleteTask}},[t._v("删除本任务")])])])])]):t._e()],1)],1)],1)},I=[],S=(r("7db0"),r("5319"),r("ac1f"),r("1276"),r("498a"),r("a15b"),r("b5ae")),A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.show?r("div",{staticClass:"text-danger"},t._l(t.messages,(function(e){return r("div",{key:e},[t._v(t._s(e))])})),0):t._e()},O=[],R={props:["validation"],computed:{show:function(){return this.validation.$dirty&&this.validation.$invalid},messages:function(){var t=[];return this.validation.$dirty&&(this.hasValidationError("required")?t.push("Please enter a value"):this.hasValidationError("email")&&t.push("Please enter a valid email address")),t}},methods:{hasValidationError:function(t){return Object.prototype.hasOwnProperty.call(this.validation.$params,t)&&!this.validation[t]}}},z=R,E=Object(c["a"])(z,A,O,!1,null,null,null),P=E.exports,M=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],D={components:{ValidationError:P},validations:{selArgs:{required:S["required"]}},data:function(){return{task:null,selType:"",selArgs:"",schdTypes:["cron","interval","date"],typeDocs:{cron:"https://apscheduler.readthedocs.io/en/stable/modules/triggers/cron.html#module-apscheduler.triggers.cron",interval:"https://apscheduler.readthedocs.io/en/stable/modules/triggers/interval.html#module-apscheduler.triggers.interval",date:"https://apscheduler.readthedocs.io/en/stable/modules/triggers/date.html#module-apscheduler.triggers.date"},ready:!1,checked:!1,dlgShow:!1,month_list:M,form:{trigger:"",interval_trigger_args:"",date_trigger_args:"",cron_trigger_args:{month:[],day:[],hour:[],minute:[],day_of_week:[],range:[]}}}},computed:{doc:function(){return this.typeDocs[this.selType]},histories:function(){return this.$store.state.histories},currentUser:function(){return this.$store.state.username}},created:function(){var t=this;this.$store.dispatch("CurrentUserAction");var e=this.$route.params.id,r=this.$store.state.tasks.find((function(t){return t.id==e}));void 0==r?(this.$store.watch((function(t){return t.actionTaskOrErr}),(function(r){"string"===typeof r?t.$message.error("加载任务详情错误: "+r,3):(t.task={},Object.assign(t.task,r),t.task.trigger&&(t.selType=t.task.trigger),t.task.trigger_args&&(t.selArgs=t.task.trigger_args),t.ready=!0,t.checked=t.task.enabled,t.$store.dispatch("GetTaskHistoryAction",e))})),this.$store.dispatch("GetTaskAction",e)):(this.task={},Object.assign(this.task,r),this.task.trigger&&(this.selType=this.task.trigger),this.task.trigger_args&&(this.selArgs=this.task.trigger_args),this.ready=!0,this.checked=this.task.enabled,this.$store.dispatch("GetTaskHistoryAction",e))},methods:{deleteTask:function(){var t=this.$store,e=this.$router,r=this.task;this.$confirm({title:"删除任务",content:"确定彻底删除任务吗",onOk:function(){t.dispatch("DeleteTaskAction",r),e.replace("/list")},onCancel:function(){}})},switchTrigger:function(t){this.checked=t,this.task.enabled=t;var e={id:this.task.id,checked:t};this.$store.dispatch("SwitchTriigerAction",e)},runCmd:function(){var t=this,e=this.$store.watch((function(t){return t.runSetMsg}),(function(r){var a=r.split("|"),s=a[1];""===s?t.$message.info("命令提交成功",3):t.$message.error("命令提交失败: "+s,3),e()}));this.$store.dispatch("RunCmdAction",this.task.cmd)},updateCmd:function(){var t=this,e=this.$store.watch((function(t){return t.taskSetMsg}),(function(r){var a=r.split("|"),s=a[1];""===s?t.$message.info("cmd 设置成功",3):t.$message.error("cmd 设置失败: "+s,3),e()}));this.$store.dispatch("UpdateTaskAction",this.task)},onDlgOK:function(){var t=this;if(""!==this.form.trigger){var e="";if("interval"===this.form.trigger){if(e=this.form.interval_trigger_args.trim(),""===e)return void this.$message.error("interval need args",3);var r=parseInt(e,10);if(isNaN(r))return void this.$message.error("interval args must be integer",3);if(r<1)return void this.$message.error("interval args must be positive(number) second",3);var a=r+"";if(a.length!=e.length)return void this.$message.error("interval args must be integer",3)}if("date"!==this.form.trigger||(e=this.form.date_trigger_args,""!==e)){"cron"==this.form.trigger&&(e=";",e+=this.handleCronArgs(this.form.cron_trigger_args.month),e+=this.handleCronArgs(this.form.cron_trigger_args.day),e+=";",e+=this.handleCronArgs(this.form.cron_trigger_args.day_of_week),e+=this.handleCronArgs(this.form.cron_trigger_args.hour),e+=this.handleCronArgs(this.form.cron_trigger_args.minute),e+=";",this.form.cron_trigger_args.range&&this.form.cron_trigger_args.range.length?(e+=this.form.cron_trigger_args.range[0]+";",e+=this.form.cron_trigger_args.range[1]):e+=";"),this.selType=this.form.trigger,this.selArgs=e,this.dlgShow=!1;var s={id:this.task.id,trigger:this.selType,trigger_args:this.selArgs},n=this.$store.watch((function(t){return t.triggerSetMsg}),(function(e){var r=e.split("|"),a=r[1];""===a?t.$message.info("trigger 设置成功",3):t.$message.error("trigger 设置失败: "+a,3),n()}));this.$store.dispatch("SetTaskTriggerAction",s)}else this.$message.error("date need args",3)}else this.$message.error("please select a kind of trigger type",3)},setTaskTrigger:function(){this.dlgShow=!0},onMenuClick:function(t){"detail"!=t.key&&this.$router.push("/"+t.key)},handleCronArgs:function(t){return t.length?t.join(",")+";":";"}}},N=D,F=(r("6677"),Object(c["a"])(N,T,I,!1,null,"001eab4c",null)),L=F.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"top"}},[r("a-layout",[r("a-layout-content",[r("a-row",[r("a-col",{attrs:{span:8}},[r("h2",[t._v("日志内容如下")])])],1),r("hr"),r("div",["instance"!==t.type?r("pre",[t._v(t._s(t.log)+"\n                ")]):r("pre",[t._v(t._s(t.instanceLog)+"\n                ")])]),r("div",{ref:"down"})],1)],1)],1)},G=[],H={data:function(){return{log:"没有可用日志",type:null,timer:""}},computed:{instanceLog:function(){return this.$store.state.lastInstanceLogs}},methods:{back:function(){this.$router.go(-1)},refresh:function(){this.$router.go()}},created:function(){this.$store.dispatch("CurrentUserAction");var t=this.$route.params.id;if(this.type=this.$route.params.type,"instance"!=this.type){var e=this.$store.state.histories,r=e.find((function(e){return e.id==t}));"stderr"===this.type&&(this.log=r.stderr),"stdout"===this.type&&(this.log=r.stdout)}else this.$store.dispatch("GetInstanceLogs",t)},mounted:function(){var t=this;setTimeout((function(){t.$refs.down.scrollIntoView({behavior:"smooth"})}),500),this.timer=setInterval(this.refresh,15e3)},beforeDestroy:function(){clearInterval(this.timer)}},K=H,q=(r("b9fa"),Object(c["a"])(K,U,G,!1,null,"42190bc2",null)),V=q.exports,B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"top"}},[r("a-layout",[r("a-layout-header",{staticClass:"header",style:{position:"fixed",zIndex:1,width:"100%"}},[r("div",{staticClass:"logo"},[t._v(" 欢迎："+t._s(t.currentUser)+" ")]),r("a-menu",{style:{lineHeight:"64px"},attrs:{theme:"dark",mode:"horizontal"},on:{click:t.onMenuClick}},[r("a-menu-item",{key:"create"},[r("a-icon",{attrs:{type:"fork"}}),r("span",[t._v("创建任务")])],1),r("a-menu-item",{key:"list"},[r("a-icon",{attrs:{type:"dashboard"}}),r("span",[t._v(" 任务列表")])],1),r("a-menu-item",{key:"detail",attrs:{disabled:""}},[r("a-icon",{attrs:{type:"edit"}}),r("span",[t._v("任务详情")])],1),r("a-menu-item",{key:"listinstance",staticClass:"ant-menu-item-active"},[r("a-icon",{attrs:{type:"history"}}),r("span",[t._v("实例列表")])],1)],1)],1),r("a-layout-content",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-1"}),r("div",{staticClass:"col-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"调度名字过滤"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),r("div",{staticClass:"input-group-append"},[r("button",{staticClass:"btn btn-outline-info",on:{click:t.advList}},[t._v("搜索")])])]),r("a-table",{attrs:{id:"tasktable",rowKey:"id",columns:t.columns,dataSource:t.instances,pagination:t.pagination},on:{change:t.onTableChange},scopedSlots:t._u([{key:"detail",fn:function(e,a){return r("span",{},[r("router-link",{attrs:{target:"_blank",to:"/log/"+a.schedule_name+"/instance/"}},[t._v("日志")]),"RUNNING"===a.status||"PENDING"===a.status?r("button",{staticClass:"btn btn-sm btn-link",on:{click:function(e){return t.onKill(a)}}},[t._v("击杀")]):t._e()],1)}}])})],1)],1)],1)},J=[],Q=(r("841c"),{data:function(){return{search:"",columns:[{title:"实例类型",dataIndex:"type"},{title:"任务名字",dataIndex:"name"},{title:"调度名字",dataIndex:"schedule_name"},{title:"状态",dataIndex:"status"},{title:"调度作业id",dataIndex:"job_id"},{title:"创建用户",dataIndex:"owner"},{title:"创建时间",dataIndex:"created"},{title:"执行耗时",dataIndex:"taken"},{title:"操作",dataIndex:"id",scopedSlots:{customRender:"detail"}}],current:1}},computed:{pagination:function(){return{total:this.$store.state.totalInst,current:this.current}},instances:function(){return this.$store.state.instances},currentUser:function(){return this.$store.state.username}},methods:{onKill:function(t){var e=this.$store,r=this,a={name:t.schedule_name,user:t.owner,id:t.id};this.$confirm({title:"强制删除 ".concat(name," ?"),content:"确定要强杀吗",onOk:function(){var t=e.watch((function(t){return t.killSetMsg}),(function(e){var a=e.split("|"),s=a[1];""===s?r.$message.info("强杀任务成功",3):r.$message.error("强杀任务失败: "+s,3),t()}));e.dispatch("KillInstanceAction",a)},onCancel:function(){}})},advList:function(){this.$store.commit("setCurrentPagInst",1);var t={search:this.search,from:"search"};this.$store.dispatch("ListInstanceAction",t),this.current=1},onTableChange:function(t){this.current=t.current,this.$store.commit("setCurrentPagInst",t.current);var e={search:this.search,from:"list"};this.$store.dispatch("ListInstanceAction",e)},onMenuClick:function(t){this.$router.push("/"+t.key)}},created:function(){this.$store.dispatch("CurrentUserAction");var t={search:this.search,from:"created"};this.$store.dispatch("ListInstanceAction",t)}}),W=Q,X=(r("7d87"),Object(c["a"])(W,B,J,!1,null,"03d3cb02",null)),Y=X.exports;a["a"].use(f["a"]);var Z=new f["a"]({mode:"history",routes:[{path:"/create",component:k},{path:"/",component:C,alias:"/list"},{path:"/detail/:id",component:L},{path:"/log/:id/:type",component:V},{path:"/listinstance",component:Y},{path:"*",redirect:"/list"}]}),tt=r("1da1"),et=(r("96cf"),r("a434"),r("b0c0"),r("c740"),r("99af"),r("159b"),r("2f62")),rt=r("bc3a"),at=r.n(rt);a["a"].use(et["a"]);var st="",nt="".concat(st,"/schedule/jobs/"),ot=nt,it=nt,ct=nt,lt=nt,ut=nt,dt="".concat(st,"/schedule/histories"),mt="".concat(st,"/schedule/jobs/get_schedule_instance"),gt="".concat(st,"/schedule/jobs/get_instance_log"),ft="".concat(st,"/index/user"),ht="".concat(st,"/schedule/jobs/exec_command"),pt="".concat(nt,"kill_job"),vt=new et["a"].Store({strict:!0,state:{username:"guest",bu:"unknown",userError:"",lastCreatedTaskId:-1,lastCreatedError:"",pageSize:10,currentPage:1,total:0,pageTotal:0,tasks:[],histories:[],instances:[],currentPageInst:1,totalInst:0,pageTotalInst:0,lastInstanceLogs:null,actionTaskOrErr:"",triggerSetMsg:"",taskSetMsg:"",runSetMsg:"",killSetMsg:""},mutations:{addTask:function(t,e){t.tasks.push(e)},clearTasks:function(t){t.tasks.splice(0,t.tasks.length)},clearHistories:function(t){t.histories.splice(0,t.histories.length)},clearInstances:function(t){t.instances.splice(0,t.instances.length)},setCurrentPage:function(t,e){t.currentPage=e},setCurrentPagInst:function(t,e){t.currentPageInst=e},syncTaskFromServer:function(t,e){var r={id:e.id,name:e.name,user:e.command_user,desc:e.desc,cmd:e.command,group:e.group,enabled:e.enabled,trigger:e.trigger,trigger_args:e.trigger_args};t.tasks.push(r)},syncInstanceFromServer:function(t,e){var r={id:e.id,job_id:e.job_id,owner:e.owner,type:e.job_type,name:e.job_name,schedule_name:e.job_schedule_name,status:e.job_status,created:e.create_time,updated:e.update_time,taken:e.job_run_time};t.instances.push(r)},syncHistoryFromServer:function(t,e){var r={id:e.id,created:e.created,taken:e.time_cost,code:e.exit_code,stderr:e.stderr,stdout:e.stdout};t.histories.push(r)},syncInstPagesFromServer:function(t,e){t.totalInst=e.total,t.pageTotalInst=e.totalPage},syncPagesFromServer:function(t,e){t.total=e.total,t.pageTotal=e.totalPage},syncLastCreatedTask:function(t,e){t.lastCreatedTaskId=e,t.lastCreatedError=""},syncLastCreatedError:function(t,e){t.lastCreatedTaskId=-1,t.lastCreatedError=e},syncLastInstanceLogs:function(t,e){t.lastInstanceLogs=e},syncActionTask:function(t,e){if("string"===typeof e)t.actionTaskOrErr=e;else{var r={id:e.id,name:e.name,user:e.command_user,desc:e.desc,cmd:e.command,group:e.group,enabled:e.enabled,trigger:e.trigger,trigger_args:e.trigger_args};t.actionTaskOrErr=r;var s=t.tasks.findIndex((function(t){return t.id===r.id}));s>=0&&a["a"].set(t.tasks,s,r)}},syncTriggerSet:function(t,e){t.triggerSetMsg=Date.now()+"|"+e.msg},syncTaskSet:function(t,e){t.taskSetMsg=Date.now()+"|"+e},syncRunSet:function(t,e){t.runSetMsg=Date.now()+"|"+e},syncKillSet:function(t,e){t.killSetMsg=Date.now()+"|"+e},syncUser:function(t,e){t.username=e.username,t.bu=e.bu}},actions:{CurrentUserAction:function(t){return Object(tt["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("guest"!==t.state.username){e.next=5;break}return e.next=3,at.a.get(ft);case 3:r=e.sent.data,""!==r.data&&t.commit("syncUser",r.data);case 5:case"end":return e.stop()}}),e)})))()},listTaskAction:function(t){return Object(tt["a"])(regeneratorRuntime.mark((function e(){var r,a,s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state.pageSize,e.next=3,at.a.get("".concat(ot,"?page=").concat(t.state.currentPage,"&pagesize=").concat(r));case 3:a=e.sent.data,t.commit("clearTasks"),a.data.data.forEach((function(e){return t.commit("syncTaskFromServer",e)})),s=a.data.total,n=s/r|0,n*r<s&&(n+=1),o={totalPage:n,total:s},t.commit("syncPagesFromServer",o);case 11:case"end":return e.stop()}}),e)})))()},ListInstanceAction:function(t,e){return Object(tt["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.state.pageSize,s=t.state.currentPageInst,void 0===e.search&&(e.search=""),r.next=5,at.a.get("".concat(mt,"?page=").concat(s,"&pagesize=").concat(a,"&job_name=").concat(e.search));case 5:n=r.sent.data,t.commit("clearInstances"),n.data.data.forEach((function(e){return t.commit("syncInstanceFromServer",e)})),o=n.data.total,i=o/a|0,i*a<o&&(i+=1),c={totalPage:i,total:o},t.commit("syncInstPagesFromServer",c);case 13:case"end":return r.stop()}}),r)})))()},CreateTaskAction:function(t,e){return Object(tt["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={group:e.group,name:e.name,desc:e.desc,command:e.cmd,command_user:"ad_user",targets:"local",bu_name:t.state.bu,owner:t.state.username},r.next=3,at.a.post(lt,a);case 3:s=r.sent.data,s.data.message?t.commit("syncLastCreatedError",s.data.message):t.commit("syncLastCreatedTask",s.data.id);case 5:case"end":return r.stop()}}),r)})))()},DeleteTaskAction:function(t,e){return Object(tt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,at.a.delete("".concat(ut).concat(e.id));case 2:t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},SetTaskTriggerAction:function(t,e){return Object(tt["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a="".concat(nt).concat(e.id,"/trigger"),s={trigger:e.trigger,trigger_args:e.trigger_args},r.next=4,at.a.post(a,s);case 4:n=r.sent.data,o={id:e.id,msg:n.message},t.commit("syncTriggerSet",o),""===n.message&&t.dispatch("GetTaskAction",e.id);case 8:case"end":return r.stop()}}),r)})))()},SwitchTriigerAction:function(t,e){return Object(tt["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r="".concat(nt).concat(e.id,"/switch"),!e.checked){t.next=7;break}return t.next=4,at.a.post(r);case 4:t.sent.data,t.next=10;break;case 7:return t.next=9,at.a.delete(r);case 9:t.sent.data;case 10:case"end":return t.stop()}}),t)})))()},GetTaskHistoryAction:function(t,e){return Object(tt["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,at.a.get("".concat(dt,"/").concat(e));case 2:a=r.sent.data,t.commit("clearHistories"),a.data.forEach((function(e){return t.commit("syncHistoryFromServer",e)}));case 5:case"end":return r.stop()}}),r)})))()},GetInstanceLogs:function(t,e){return Object(tt["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a="".concat(gt,"?task_instance_name=").concat(e),r.next=3,at.a.get(a);case 3:s=r.sent.data,s.message?s.data=s.message:s.data=s.data.data,t.commit("syncLastInstanceLogs",s.data);case 6:case"end":return r.stop()}}),r)})))()},GetTaskAction:function(t,e){return Object(tt["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a="".concat(it).concat(e),r.next=3,at.a.get(a);case 3:s=r.sent.data,""===s.message?t.commit("syncActionTask",s.data.data):t.commit("syncActionTask",s.message);case 5:case"end":return r.stop()}}),r)})))()},UpdateTaskAction:function(t,e){return Object(tt["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a="".concat(ct).concat(e.id),s={command_user:"ad_user",targets:"local",bu_name:t.state.bu,owner:t.state.username,group:e.group,name:e.name,desc:e.desc,command:e.cmd},r.next=4,at.a.put(a,s);case 4:n=r.sent.data,null==n.message&&(n.message=""),t.commit("syncTaskSet",n.message);case 7:case"end":return r.stop()}}),r)})))()},RunCmdAction:function(t,e){return Object(tt["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={command:e,hosts_id:"1"},r.next=3,at.a.post(ht,a);case 3:s=r.sent.data,""===s.data?t.commit("syncRunSet",s.message):t.commit("syncRunSet","");case 5:case"end":return r.stop()}}),r)})))()},KillInstanceAction:function(t,e){return Object(tt["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={job_schedule_name:e.name,hosts_id:"1",kill_user:e.user,id:e.id},r.next=3,at.a.post(pt,a);case 3:s=r.sent.data,""!==s.message?t.commit("syncKillSet",s.message):t.commit("syncKillSet","");case 5:case"end":return r.stop()}}),r)})))()}}});a["a"].config.productionTip=!1,a["a"].use(m.a),a["a"].use(g["a"]),new a["a"]({render:function(t){return t(u)},store:vt,router:Z}).$mount("#app")},6677:function(t,e,r){"use strict";r("03ae")},"757b":function(t,e,r){},"76b8":function(t,e,r){},"7d87":function(t,e,r){"use strict";r("76b8")},"9af0":function(t,e,r){},a1b1:function(t,e,r){},b9fa:function(t,e,r){"use strict";r("757b")},cb4f:function(t,e,r){"use strict";r("a1b1")},dfc1:function(t,e,r){"use strict";r("9af0")}});
//# sourceMappingURL=app.3c691028.js.map